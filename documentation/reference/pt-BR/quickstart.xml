<?xml version='1.0' encoding="iso-8859-1"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" []>
<chapter id="behave-quickstart">
	<title>Roteiro Rápido</title>

	<para>
		Esta seção apresenta um roteiro rápido para criação e
		configuração de um projeto com uso do framework Demoiselle Behave.
	</para>
	<section>
		<title>Pré Requisitos de Uso</title>
		<orderedlist numeration="arabic">
			<listitem>
				<para>
					Eclipse 4.2 (Juno) -
					<ulink
						url="http://www.eclipse.org/downloads/download.php?file=/technology/epp/downloads/release/juno/SR2/eclipse-jee-juno-SR2-linux-gtk.tar.gz">Link para download
					</ulink>
				</para>
			</listitem>
			<listitem>
				<para>
					Plugin para Maven no Eclipse ou Maven na linha de comando
					(mvn)
				</para>
			</listitem>
			<listitem>
				<para>
					Linux
				</para>
			</listitem>
			<listitem>
				<para>
					JDK 1.6
				</para>
			</listitem>
		</orderedlist>
	</section>
	<section>
		<title>Configurando o Arquétipo</title>
		<para>
			O framework Demoiselle Behave disponibiliza um arquétipo Maven
			para faciliar a criação de projetos.
			O primeiro passo na configuração
			do arquétipo consiste em configurar o repositório. Para tanto deve ser acessado o menu
			Windows>Preferences do Eclipse.
		</para>
		<para>
			<mediaobject>
				<imageobject role="fo">
					<imagedata fileref="images/menupreference.png" align="center"
						format="PNG" />
				</imageobject>
				<imageobject role="html">
					<imagedata fileref="images/menupreference.png" align="center"
						format="PNG" />
				</imageobject>
				<caption>
					<para>Menu de Preferência.
					</para>
				</caption>
			</mediaobject>
		</para>
		<para>
			O próximo passo deverá ser o acionamento do botão Add Remote Catalog.
		</para>
		<para>
			<mediaobject>
				<imageobject role="fo">
					<imagedata fileref="images/preferences.png" align="center"
						format="PNG" scalefit="1" width="75%" />
				</imageobject>
				<imageobject role="html">
					<imagedata fileref="images/preferences.png" align="center"
						format="PNG" scalefit="1" width="75%" />
				</imageobject>
				<caption>
					<para>Clicar no botão Add Remote Catalog.
					</para>
				</caption>
			</mediaobject>
		</para>
		<para>
			Em seguida deverá ser informado no campo Catalog File url:
			<emphasis>
				http://demoiselle.sourceforge.net/repository/archetype-catalog.xml
			</emphasis>
			No campo Description informe:
			<emphasis>
				Framework Demoiselle
			</emphasis>
		</para>
		<para>
			<mediaobject>
				<imageobject role="fo">
					<imagedata fileref="images/remotecatalog.png" align="center"
						format="PNG" scalefit="1" width="75%" />
				</imageobject>
				<imageobject role="html">
					<imagedata fileref="images/remotecatalog.png" align="center"
						format="PNG" scalefit="1" width="75%" />
				</imageobject>
				<caption>
					<para>Preenchendo Catálogo Remoto.
					</para>
				</caption>
			</mediaobject>
		</para>
	</section>
	<section>
		<title>Criação do Projeto</title>
		<para>
			O primeiro passo na criação de um projeto Demoisele-Behave é
			criar um projeto Maven com o arquétipo adequado ao projeto de testes.
			Neste tutorial será utilizado o arquétipo jbehave-selenium-archetype.
			O primeiro passo é escolher a opção File>New>Other>Maven>Maven
			Project.

		</para>
		<para>
			<mediaobject>
				<imageobject role="fo">
					<imagedata fileref="images/criandoprojeto1.png" align="center"
						format="PNG" scalefit="1" width="75%" />
				</imageobject>
				<imageobject role="html">
					<imagedata fileref="images/criandoprojeto1.png" align="center"
						format="PNG" />
				</imageobject>
				<caption>
					<para>Escolhendo Maven Project.
					</para>
				</caption>
			</mediaobject>
		</para>
		<para>
			Escolher o catálogo Demoisele-Behave e escolher o arquétipo do
			Selenium.
		</para>
		<para>
			<mediaobject>
				<imageobject role="fo">
					<imagedata fileref="images/arquetipo.png" align="center"
						format="PNG" scalefit="1" width="75%" />
				</imageobject>
				<imageobject role="html">
					<imagedata fileref="images/arquetipo.png" align="center"
						format="PNG" />
				</imageobject>
				<caption>
					<para>Escolhendo o arquétipo jbehave-selenium-archetype.
					</para>
				</caption>
			</mediaobject>
		</para>
		<para>
			Preencher o Group Id e Artifact Id e finalize a criação do
			projeto.
		</para>
		<para>
			<mediaobject>
				<imageobject role="fo">
					<imagedata fileref="images/criandoprojeto3.png" align="center"
						format="PNG" scalefit="1" width="75%" />
				</imageobject>
				<imageobject role="html">
					<imagedata fileref="images/criandoprojeto3.png" align="center"
						format="PNG" />
				</imageobject>
				<caption>
					<para>Escolhendo o arquétipo jbehave-selenium-archetype.
					</para>
				</caption>
			</mediaobject>
		</para>
	</section>
	<section>
		<title>Estrutura de diretórios</title>
		<para>
			O projeto criado a partir do arquétipo possui os diretórios
			src/test/java e src/test/resources. No diretório src/test/resource
			estarão contidas as histórias de usuários. No diretório src/test/java
			estarão contidos os Steps do demoiselle bem como os objetos
			responsáveis pela identificação das telas envolvidas nos testes e
			seus objetos.
		</para>
		<para>
			<mediaobject>
				<imageobject role="fo">
					<imagedata fileref="images/diretorioprojeto1.png" align="center"
						format="PNG" scalefit="1" width="75%" />
				</imageobject>
				<imageobject role="html">
					<imagedata fileref="images/diretorioprojeto1.png" align="center"
						format="PNG" />
				</imageobject>
				<caption>
					<para>Estrutura de pastas do projeto criado a partir do arquétipo.
					</para>
				</caption>
			</mediaobject>
		</para>
	</section>
	<section>
		<title>Executando Teste</title>
		<para>
			A classe MyTest é responsável pela configuração da pasta onde
			estão localizadas as histórias de usuários bem como os passos (Steps)
			a serem adicionados ao projeto.
		</para>

		<para>
			<mediaobject>
				<imageobject role="fo">
					<imagedata fileref="images/classeapptest.png" align="center"
						format="PNG" scalefit="1" width="75%" />
				</imageobject>
				<imageobject role="html">
					<imagedata fileref="images/classeapptest.png" align="center"
						format="PNG" />
				</imageobject>
				<caption>
					<para>Classe MyTest.</para>
				</caption>
			</mediaobject>
		</para>
		<para>
			O projeto criado já possui um exemplo que realiza uma consulta
			no
			Google. Para executar o teste basta clicar com o botão direito na
			classe AppTeste e escolher Run as>JUnit Test.
		</para>
		<para>
			<mediaobject>
				<imageobject role="fo">
					<imagedata fileref="images/executandoteste.png" align="center"
						format="PNG" scalefit="1" width="75%" />
				</imageobject>
				<imageobject role="html">
					<imagedata fileref="images/executandoteste.png" align="center"
						format="PNG" />
				</imageobject>
				<caption>
					<para>Classe AppTest
					</para>
				</caption>
			</mediaobject>
		</para>
		<para>
			O framework inicia o Driver e abre o navegador. As ações das
			histórias poderão ser vistas no console da IDE como na imagem abaixo.
		</para>
		<para>
			<mediaobject>
				<imageobject role="fo">
					<imagedata fileref="images/console1.png" align="center"
						format="PNG" scalefit="1" width="75%" />
				</imageobject>
				<imageobject role="html">
					<imagedata fileref="images/console1.png" align="center"
						format="PNG" />
				</imageobject>
				<caption>
					<para>Saída do console</para>
				</caption>
			</mediaobject>
		</para>
		<para>
			Abaixo segue a história executada pelo framework:
			<programlisting>Funcionalidade: Acesso

Narrativa:
Para obter a tela inicial aparece para mim
Como um visitante
Desejo acessar o Google

Cenário: Acesso ao Google

Dado que vou para a tela "Tela de Busca"
Então será exibido "Google"

Cenário: Pesquisa Simples

Dado que vou para a tela "Tela de Busca"
Quando informo "Demoiselle Behave" no campo "Campo de Busca"
Então será exibido "https://github.com/demoiselle/behave/"</programlisting>
		</para>
		<para>
			O framework associa o campo
			<emphasis>"Campo de Busca"</emphasis>
			com o elemento searchField da classe MyPage criada
			de forma a
			mapear os
			objetos da tela com o Id procurado. O Elemento
			locatorType
			informa o
			tipo de
			reconhecimento de objetos que será utilizado
			no
			framework. No
			exemplo, será localizado o elemento cujo Id
			possui o
			valor "gbqfq".

		</para>
		<programlisting>@ScreenMap(name = "Tela de Busca", location = "http://www.google.com.br")
public class MyPage {

	@ElementMap(name = "Campo de Busca", locatorType = ElementLocatorType.Id, locator = "gbqfq")
	private TextField searchField;

	@ElementMap(name = "Estou com sorte", locatorType = ElementLocatorType.Id, locator = "gbqfbb")
	private Button buttonLuckSearch;

}</programlisting>
	</section>

</chapter>
